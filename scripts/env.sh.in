#!/usr/bin/env sh

# This script sets environment variables and aliases to
# allow the user testing of a tiscamera build without the need
# of installation

BASE="@TCAM_BINARY_DIR@"
SOURCE_DIR="@TCAM_SOURCE_DIR@"


if [ -z "$BASE" ]
then
    echo "Unable to find root dir of project."
    echo "Please set it manually."
    exit 1
fi

if [ -z "${PKG_CONFIG_PATH}" ]; then
    export PKG_CONFIG_PATH="${BASE}/data/"
else
    export PKG_CONFIG_PATH="${BASE}/data/:${PKG_CONFIG_PATH}"
fi

if [ -z "${C_INCLUDE_PATH}" ]; then
    export C_INCLUDE_PATH="${SOURCE_DIR}/src/gobject:${SOURCE_DIR}/src/gstreamer-1.0"
else
    export C_INCLUDE_PATH="${C_INCLUDE_PATH}:${SOURCE_DIR}/src/gobject:${SOURCE_DIR}/src/gstreamer-1.0"
fi

if [ -z "${GST_PLUGIN_PATH_1_0}" ]; then
    export GST_PLUGIN_PATH_1_0="${BASE}/lib"
else
    export GST_PLUGIN_PATH_1_0="${BASE}/lib/:${GST_PLUGIN_PATH_1_0}"
fi

if [ -z "${LD_RUN_PATH}" ]; then

    export LD_RUN_PATH="${BASE}/lib"
else
    export LD_RUN_PATH="${BASE}/lib:${LD_LIBRARY_PATH}"
fi

if [ -z "${GI_TYPELIB_PATH}" ]; then
    export GI_TYPELIB_PATH="${BASE}/src/gobject/"
else
    export GI_TYPELIB_PATH="${BASE}/src/gobject/:${GI_TYPELIB_PATH}"
fi

if [ -z "${LD_LIBRARY_PATH}" ]; then
    export LD_LIBRARY_PATH="${BASE}/lib:"
else
    export LD_LIBRARY_PATH="${BASE}/lib:${LD_LIBRARY_PATH}"
fi

if [ -z "${LIBRARY_PATH}" ]; then
    export LIBRARY_PATH="${BASE}/lib/"
else
    export LIBRARY_PATH="${BASE}/lib:${LD_RUN_PATH}"
fi


export PATH="${PATH}:${BASE}/bin/"
